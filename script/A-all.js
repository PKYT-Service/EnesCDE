async function fetchToken() {
  const urlToken = 'https://pkyt-database-up.vercel.app/code-source/E-CDE/Secure-token.js'
  const res = await fetch(urlToken)
  if (!res.ok) throw new Error('Impossible de rÃ©cupÃ©rer le token')
  const data = await res.json()
  return data.GITHUB_TOKEN
}

async function fetchStyles(githubToken) {
  // API GitHub pour rÃ©cupÃ©rer un fichier JSON raw dans un repo privÃ©
  // Remplace USER/REPO/PATH par les tiens
  const urlStyles = 'https://api.github.com/repos/PKYT-Service/database_EnesCDE/contents/ecde/data/ClassTailwindCss.json'

  const res = await fetch(urlStyles, {
    headers: {
      Authorization: `token ${githubToken}`,
      Accept: 'application/vnd.github.v3.raw' // Pour rÃ©cupÃ©rer le contenu brut
    }
  })

  if (!res.ok) throw new Error('Impossible de rÃ©cupÃ©rer les styles')

  const stylesJson = await res.json()
  return stylesJson
}

function applyStyles(styles) {
  Object.entries(styles).forEach(([id, className]) => {
    const el = document.getElementById(id)
    if (el) {
      // Ajoute les classes sans Ã©craser
      el.classList.add(...className.split(' '))
    } else {
      console.warn(`Ã‰lÃ©ment avec id "${id}" introuvable`)
    }
  })
}

async function init() {
  try {
    const token = await fetchToken()
    const styles = await fetchStyles(token)
    applyStyles(styles)
  } catch (e) {
    console.error('Erreur lors de l\'initialisation des styles :', e)
  }
}

init()







//
// Place Text from ``
//
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("ecde_all").innerHTML = `

    `;
  });
  //
  // Replace Text from TB.json
  //
    // Fonction pour charger le fichier JSON et remplacer les balises
    async function replaceTextFromJson() {
        try {
          // Charger le fichier JSON avec les clÃ©s et leurs valeurs
          const response = await fetch('https://enes-cde.vercel.app/data/json/TB.json');
          const jsonData = await response.json();
   
          // SÃ©lectionner tous les Ã©lÃ©ments avec un id spÃ©cifique
          const elements = document.querySelectorAll('[id^="ecde_annee_set"]');
          
          elements.forEach((element) => {
            const key = element.id; // La clÃ© ici est l'id entier (ex : 'ecde_annee_set')
            
            // VÃ©rifier si la clÃ© existe dans le fichier JSON
            if (jsonData.hasOwnProperty(key)) {
              // Remplacer le contenu de la balise par la valeur correspondante
              element.textContent = jsonData[key];
            } else {
              console.warn(`ClÃ© "${key}" introuvable dans le fichier JSON.`);
            }
          });
  
        } catch (error) {
          console.error("Erreur lors du chargement du fichier JSON:", error);
        }
      }
  
      // Appeler la fonction pour remplacer les textes dÃ¨s que la page est prÃªte
      document.addEventListener('DOMContentLoaded', replaceTextFromJson);


//////////////////////////////////////////////
// Google Cookies + Google analitycs        //
//////////////////////////////////////////////
 
        /// analitycs
    document.write("<!-- Google tag (gtag.js) -->\r\n<script async src=\"https:\/\/www.googletagmanager.com\/gtag\/js?id=G-NHMQWLC3VY\"><\/script>\r\n<script>\r\n  window.dataLayer = window.dataLayer || [];\r\n  function gtag(){dataLayer.push(arguments);}\r\n  gtag('js', new Date());\r\n\r\n  gtag('config', 'G-NHMQWLC3VY');\r\n<\/script>");

//////////////////////////////////////////////
// PKYT - Service + Enes-CDE Script         //
//////////////////////////////////////////////


// Fonction pour charger le script externe et l'appliquer Ã  la page
const loadScriptAndApply = async () => {
  try {
    // RÃ©cupÃ©rer le fichier JavaScript depuis l'URL
    const response = await fetch('https://enes-cde.vercel.app/SLPECDE/m.js');
    
    if (!response.ok) {
      throw new Error('ðŸŒŸ[E-CDE] | Erreur lors du chargement du script.');
    }
    
    const scriptContent = await response.text();
    
    // CrÃ©er un Ã©lÃ©ment script et spÃ©cifier qu'il s'agit d'un module
    const scriptElement = document.createElement('script');
    scriptElement.type = 'module'; // Indique que le script doit Ãªtre traitÃ© comme un module
    scriptElement.textContent = scriptContent;
    
    // Ajouter le script Ã  la page
    document.body.appendChild(scriptElement);
    
    console.log("ðŸŒŸ[E-CDE] | âœ… Le contenu du fichier a Ã©tÃ© chargÃ© et appliquÃ© avec succÃ¨s.");
    
  } catch (error) {
    console.error("ðŸŒŸ[E-CDE] | ðŸŸ¥ Erreur lors du chargement du fichier :", error);
  }
};

// Charger et appliquer le fichier Ã  la page
loadScriptAndApply();


























