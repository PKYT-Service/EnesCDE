<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
        <title>EnesCDE - Admin > LOG-Statistiques</title>
        <link rel="icon" type="image/png" href="https://enes-cde.vercel.app/data/img/web/favicon.png">
        
        <!-- Script pour ajouter dynamiquement le footer -->
        <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
        <script src="https://enes-cde.vercel.app/script/A-footer.js" defer></script>
        <script src="https://enes-cde.vercel.app/users/panel/admin/__menu__.js" defer></script>
        <script src="https://enes-cde.vercel.app/script/A-all.js" defer></script>
        <script src="./__sessions__.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/datamaps/0.5.9/datamaps.world.min.js"></script>
        <div id="ecde_all"></div>
    </head>
    <body class="bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white">
        <div class="flex h-screen">
            <!-- Menu -->
            <div id="ecde_menu" class="w-20"></div>
    
            <!-- Main Content -->
            <main class="flex-1 p-6 bg-gray-100 dark:bg-gray-800">
                <h1 class="text-2xl font-semibold">Admin - Consulter les logs :</h1>
                <h1 class="text-2xl font-bold mb-4">Statistiques des logs</h1>

                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-gray-950 p-4 rounded-lg">
                        <h2 class="text-lg font-semibold">Données générales</h2>
                        <p>ID Reconnu : <span id="id_reconnus">0</span></p>
                        <p>ID Inconnu : <span id="id_inconnus">0</span></p>
                        <p>Vues Totales : <span id="vues_totales">0</span></p>
                        <p>Vues (7 derniers jours) : <span id="vues_7j">0</span></p>
                    </div>
                    <div class="bg-gray-950 p-4 rounded-lg">
                        <h2 class="text-lg font-semibold">Pages Consultées</h2>
                        <ul id="liste_pages"></ul>
                    </div>
                </div>
                <div class="mt-6 bg-gray-950 p-4 rounded-lg">
                    <h2 class="text-lg font-semibold">Liste des utilisateurs</h2>
                    <ul id="liste_users"></ul>
                </div>
                
                <!-- Carte de répartition des utilisateurs -->
                <div id="hs-users-datamap" class="mt-6 bg-gray-950 p-4 rounded-lg h-96"></div>
                <script>
                    document.addEventListener("DOMContentLoaded", function () {
                        const dataSet = {
                            USA: { fillKey: "MAJOR" },
                            CHN: { fillKey: "MAJOR" },
                            IND: { fillKey: "MAJOR" },
                            DEU: { fillKey: "MAJOR" },
                            GBR: { fillKey: "MAJOR" },
                            BRA: { fillKey: "MAJOR" }
                        };
                        new Datamap({
                            element: document.getElementById("hs-users-datamap"),
                            projection: "mercator",
                            responsive: true,
                            fills: {
                                defaultFill: "#d1d5db",
                                MAJOR: "#9ca3af"
                            },
                            data: dataSet,
                            geographyConfig: {
                                borderColor: "rgba(0, 0, 0, .09)",
                                highlightFillColor: "#3b82f6",
                                highlightBorderColor: "#3b82f6"
                            }
                        });
                    });
                </script>
                
                <!-- Footer -->
                <div id="ecde_footer"></div>
            </main>
        </div>
    </body>
</html>
